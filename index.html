<script>
const levels = ["level3-1","level3-2","level3-3","level3-4","level3-5"];

// Fungsi tampilkan level
function showLevel(idx){ 
  levels.forEach(id=>document.getElementById(id).classList.remove('active')); 
  document.getElementById(levels[idx]).classList.add('active'); 
}

// Fungsi jalankan level
function runLevel(idx){
  showLevel(idx);
  const level = document.getElementById(levels[idx]);
  const overlays = level.querySelectorAll(".text-overlay");
  const listSmall = level.querySelector(".list-small");
  
  // Reset overlay & list kecil
  overlays.forEach(o=>o.classList.remove('fade-in'));
  if(listSmall) listSmall.classList.remove('show');
  
  // ===== TIMELINE TIAP LEVEL =====
  // Array timeline dalam milidetik: overlay akan muncul sesuai urutan
  let timeline=[];
  switch(idx){
    case 0: 
      // LEVEL 3.1 - Salah Baca Soal
      // overlay1-1 → 1.5 detik
      // overlay1-2 → 3 detik
      // overlay1-3 → 7.5 detik
      // overlay1-4 → 11.5 detik
      timeline=[1500,3000,7500,11500]; 
      break;
    case 1: 
      // LEVEL 3.2 - Salah Pilih Konsep
      // overlay2-1 → 1.5 detik
      // overlay2-2 → 4.5 detik
      // overlay2-3 → 7.5 detik
      timeline=[1500,4500,7500]; 
      break;
    case 2: 
      // LEVEL 3.3 - Terjebak Opsi Tampak Benar
      // overlay3-1 → 1.5 detik
      // overlay3-2 → 4 detik
      // overlay3-3 → 7.5 detik
      // overlay3-4 → 11.5 detik
      timeline=[1500,4000,7500,11500]; 
      break;
    case 3: 
      // LEVEL 3.4 - Rationale Singkat (7 langkah)
      // overlay4-1 → 1.5 detik
      // overlay4-2 → 3 detik
      // overlay4-3 → 4.5 detik
      // overlay4-4 → 6 detik
      // overlay4-5 → 7.5 detik
      // overlay4-6 → 9 detik
      // overlay4-7 → 12 detik
      timeline=[1500,3000,4500,6000,7500,9000,12000]; 
      break;
    case 4: 
      // LEVEL 3.5 - Kenapa Latihan Biasa Gagal
      // overlay5-1 → 1.5 detik
      // overlay5-2 → 5 detik
      // overlay5-3 → 10 detik
      // overlay5-4 → 14 detik
      timeline=[1500,5000,10000,14000]; 
      break;
  }
  
  // Jalankan overlay sesuai timeline
  overlays.forEach((o,i)=>{
    setTimeout(()=>{
      overlays.forEach(x=>x.classList.remove('fade-in'));
      o.classList.add('fade-in');
      if(i===overlays.length-1 && listSmall) listSmall.classList.add('show');
    }, timeline[i] || (i*2000)); // fallback jika overlay lebih banyak dari timeline
  });
  
  // Lanjut ke level berikutnya otomatis setelah 18 detik
  setTimeout(()=>{ if(idx<levels.length-1) runLevel(idx+1); },18000);
}

// Start autoplay dari level 3.1
runLevel(0);
</script>
