<body>
<div class="stage">

  <!-- VIDEO DEMO CBT -->
  <video id="demoVideo" src="video.mp4" autoplay muted loop playsinline></video>

  <!-- SAFE PHONE AREA -->
  <div class="safe">
    <div class="hand" id="hand">
      <img src="hand.png" alt="gesture hand"
           onerror="this.style.display='none'; this.parentNode.innerHTML='â˜ï¸';">
    </div>
  </div>

</div>

<script>
const video = document.getElementById('demoVideo');
const hand = document.getElementById('hand');

// Definisikan timeline gesture (dalam detik)
const timeline = [
  {start:0, end:1.5, x:0, y:24, rotate:0, scale:0.92, opacity:0},
  {start:1.5, end:2.5, x:0, y:0, rotate:-10, scale:1, opacity:1},  // target 1
  {start:2.5, end:4, x:20, y:50, rotate:15, scale:0.92, opacity:1}, // target 2
  {start:4, end:4.3, x:20, y:50, rotate:15, scale:0.95, opacity:1}, // tap
  {start:4.3, end:4.5, x:20, y:50, rotate:15, scale:1, opacity:1}, // release
  {start:4.5, end:6, x:-10, y:80, rotate:-5, scale:0.92, opacity:1}, // target 3
  {start:6, end:6.3, x:-10, y:80, rotate:-5, scale:0.95, opacity:1}, // tap
  {start:6.3, end:6.5, x:-10, y:80, rotate:-5, scale:1, opacity:1}, // release
  {start:6.5, end:7.5, x:-10, y:80, rotate:-5, scale:0.96, opacity:0}, // fade out
];

video.addEventListener('timeupdate', () => {
  const t = video.currentTime % video.duration; // loop
  let state = timeline.find(s => t >= s.start && t < s.end);
  if(state){
    hand.style.opacity = state.opacity;
    hand.style.transform = `translate(${state.x}px, ${state.y}px) rotate(${state.rotate}deg) scale(${state.scale})`;
  } else {
    hand.style.opacity = 0;
  }
});
</script>
